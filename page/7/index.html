<!DOCTYPE html>
<html>
  <head>
    <title>hayato.io</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">

    <link href="https://plus.google.com/+HayatoIto/posts" rel="author">

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet">

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" rel="stylesheet">
    <link href="http://hayato.io/theme/solarizedlight.css" rel="stylesheet">
    <link href="http://hayato.io/theme/site.css" rel="stylesheet">

    <link id="favicon" href="http://hayato.io/static/timer/chocolate.ico" rel="shortcut icon">

    <link href="http://hayato.io/feeds/all.atom.xml" rel="alternate"
          title="All posts – hayato.io" type="application/atom+xml">

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-195971-6', 'hayato.io');
  ga('send', 'pageview');
</script>


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <nav class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="fa fa-collapse icon-2x"></span>
          </button>
          <a href="http://hayato.io/" class="navbar-brand">hayato.io</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="http://hayato.io/archives/"><i class="fa fa-list"></i>&nbsp;Archives</a></li>
            <li>
              <a href="http://hayato.io/about/"><i class="fa fa-user"></i>&nbsp;About</a>
            </li>
            <li>
              <a href="http://hayato.io/kingsviking/"><i class="fa fa-code"></i>&nbsp;kingsviking</a>
            </li>
            <li>
              <a href="http://hayato.io/timer/"><i class="fa fa-clock-o"></i>&nbsp;Timer</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container">
      <div class="row">
        <div class="col-md-offset-1 col-md-10">
<section id="content" class="content autopagerize_page_element">

<article>
  <header class="page-header">
    <h1 class="site-article-title">
      <a href="http://hayato.io/2005/srm273/"
         rel="bookmark"
         title="Permalink to SRM273 - bit演算はintで行われるのね">
         SRM273 - bit演算はintで行われるのね
      </a>
    </h1>
    <div class="post-date">
      <time datetime="2005-11-22">
        2005-11-22
      </time>
    </div>
  </header>
  <div class="article-content">
    <!-- -*- mode: rst; coding: utf-8 -*- -->
<p><a class="reference external" href="http://www.topcoder.com/stat?c=round_overview&amp;rd=8070">SRM273</a> に挑戦．
はじめて，平日の昼に挑戦です．今までは，日本時間の夜に開催されるSRMにしか参加しませんでした．</p>
<div class="section" id="fallingcoconuts-code">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=5895&amp;rd=8070">FallingCoconuts</a> (<a class="reference external" href="http://www.topcoder.com/stat?c=problem_solution&amp;rm=246824&amp;rd=8070&amp;pm=5895&amp;cr=15632820">code</a>)</h2>
<p>250点問題．
ココナッツを上から落としておとしていきます．積みあがった形を返す問題です．テトリスみたいなものですね．
番人(Sentinel)というちょっとしてTipsを使いました．
あらかじめ，一番下の段にココナツを敷き詰めておけば，ココナツが下にはみだすことはありません．
一番下までココナツが落ちたときの条件をチェックする必要がなくなります．
一番下の段に敷き詰めたココナツば番人がわりになってくれるわけです．
今回は，特にSentinel を使うまでもないですが，ときどきあらかじめSentinelを用意しておけば，
条件チェックが非常に楽になるケースがあります．</p>
</div>
<div class="section" id="snaketurbo-code">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=5893&amp;rd=8070">SnakeTurbo</a> (<a class="reference external" href="http://www.topcoder.com/stat?c=problem_solution&amp;rm=246824&amp;rd=8070&amp;pm=5893&amp;cr=15632820">code</a>)</h2>
<p>500点問題．</p>
<div class="highlight"><pre><span class="n">o</span><span class="o">---</span><span class="n">o</span><span class="o">-</span><span class="n">o</span><span class="o">-</span><span class="n">S</span><span class="o">--</span><span class="n">o</span><span class="o">--</span><span class="n">o</span><span class="o">--------</span><span class="n">G</span><span class="o">---</span><span class="n">o</span>
</pre></div>
<p>Sが Snake(へび)がいるスタート地点，Gがゴール地点です．へびは1秒に1単位進むことができます．
o はパワーアップえさです． o を食べるたびに，へび はスピードが2倍になります．</p>
<ul class="simple">
<li>2つ食べれば4倍</li>
<li>3つ食べれば8倍</li>
<li>4つ食べれば16倍</li>
</ul>
<p>というふうに，効果は累積します．
へびがスタート地点からゴールするまでの最短時間を求める問題です．</p>
<p>これも，前回のSRM272のLevel2問題，RoundTableと同様に，Recursive + Memoization で解きました.
自信があったんですけど，System Testに落ちました．
うーん，どこがおかしいかしばらく気づきませんでした．．発見してみてください．
ここです</p>
<div class="highlight"><pre><span class="kt">double</span> <span class="n">boost</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="o">(</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="o">);</span>
</pre></div>
<p>ここは，現在のへびのスピード，すなわち 2の (right - left) 乗 を求めているところです．
入力の条件は，</p>
<blockquote>
orbs will contain between 0 and 50 elements, inclusive.</blockquote>
<p>なので，(right - left) は32以上になる可能性があります．
右辺のビットシフトは int で計算が行われます．
int は32ビットなので，(right - left) が32以上のときは対応できません．
素直に</p>
<div class="highlight"><pre><span class="kt">double</span> <span class="n">boost</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="o">(</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="o">)</span> <span class="o">);</span>
</pre></div>
<p>または</p>
<div class="highlight"><pre><span class="kt">double</span> <span class="n">boost</span> <span class="o">=</span> <span class="mi">1L</span> <span class="o">&lt;&lt;</span> <span class="o">(</span><span class="n">right</span> <span class="o">-</span> <span class="n">left</span><span class="o">);</span>
</pre></div>
<p>とlongを使用しておけば，何の問題もなく，System Testに通っていました．残念．</p>
</div>
<div class="section" id="robotcollision">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=5878&amp;rd=8070">RobotCollision</a></h2>
<p>900点問題．
時間たりず．Level3 問題にしては，簡単なほうだったみたいです．
条件を絞れば，Brute-force でいけます．</p>
</div>
<div class="section" id="id7">
<h2>結果</h2>
<p>System Testの結果です．
( <a class="reference external" href="http://www.topcoder.com/stat?c=coder_room_stats&amp;cr=15632820&amp;rd=8070&amp;rm=246824">Room Statistics</a> )</p>
<img alt="Room Statistics" src="http://static.flickr.com/39/74683489_f24f748f7c_o.png" />
<p>レーティングはちょっとだけ上昇しました．</p>
</div>

  </div>
</article>
<article>
  <header class="page-header">
    <h1 class="site-article-title">
      <a href="http://hayato.io/2005/srm272/"
         rel="bookmark"
         title="Permalink to SRM272 - Division1 - 4度目の正直">
         SRM272 - Division1 - 4度目の正直
      </a>
    </h1>
    <div class="post-date">
      <time datetime="2005-11-20">
        2005-11-20
      </time>
    </div>
  </header>
  <div class="article-content">
    <!-- -*- mode: rst; coding: utf-8 -*- -->
<p><a class="reference external" href="http://www.topcoder.com/stat?c=round_overview&amp;rd=8069">SRM272</a> に挑戦．
今回のSRMは，msnがスポンサーです．$5,000の賞金がでます．
TopCoderでは，ときどきこのようなSponsored Match が行わています．
優秀な人材がほしい企業と，名を売りたい人たちの出会いの場の役目も果たしています.</p>
<div class="section" id="fewestfactors-code">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=5886&amp;rd=8069">FewestFactors</a> (<a class="reference external" href="http://www.topcoder.com/stat?c=problem_solution&amp;rm=246773&amp;rd=8069&amp;pm=5886&amp;cr=15632820">code</a>)</h2>
<p>250点問題．
数字(0〜9)が最大5個与えられます．
それらを並べ替えてできる最大5桁の数のうち，Factor(約数)の数が最も少ないものを求める問題です．
たかだか最大5個ですので，全ての並び方を試せばOKです．いわゆるpermutationです．
C++ だと， STL にその名もずばり <tt class="docutils literal">next_permutation()</tt> がありますので，それを使うとよいです．
C++以外の言語では，DFS (depth first search)で再帰的にpermutationを生成すればよいでしょう．</p>
</div>
<div class="section" id="roundtable-code">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=4835&amp;rd=8069">RoundTable</a> (<a class="reference external" href="http://www.topcoder.com/stat?c=problem_solution&amp;rm=246773&amp;rd=8069&amp;pm=4835&amp;cr=15632820">code</a>)</h2>
<p>500点問題．
A社の代表 (countA)人 と B社の代表 (countB) 人が円卓に座ってミーティングをします．
椅子の数 は (chairs) です．
同じ会社の人どおしは，隣り合って座ってもよいですが，
A社の人とB社の人は，間に距離をいす(minDistance) 分だけあけて座らなければいけません．</p>
<ul class="simple">
<li>minDistance = 1 は，隣り合っていてもいいです．</li>
<li>minDistance = 2 だと，間に最低1つのいすが必要．</li>
<li>minDistance = 3 だと，間に最低2つのいすが必要．</li>
<li>...</li>
</ul>
<p>というわけです．可能な座り方の数はいくつか? という問題です．
SRMでは，Recursive と Memoization というパターンでときました．
この手の問題は，DP(Dynamic Programming:動的計画法)を用いることもできます．
こんな感じになります．</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RoundTable</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kt">long</span> <span class="nf">arrangements</span><span class="o">(</span><span class="kt">int</span> <span class="n">countA</span><span class="o">,</span> <span class="kt">int</span> <span class="n">countB</span><span class="o">,</span> <span class="kt">int</span> <span class="n">chairs</span><span class="o">,</span> <span class="kt">int</span> <span class="n">minDis</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">long</span><span class="o">[][][][][]</span> <span class="n">dp</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">long</span><span class="o">[</span><span class="n">chairs</span><span class="o">][</span><span class="n">minDis</span><span class="o">][</span><span class="n">minDis</span><span class="o">][</span><span class="n">countA</span><span class="o">+</span><span class="mi">1</span><span class="o">][</span><span class="n">countB</span><span class="o">+</span><span class="mi">1</span><span class="o">];</span>
    <span class="n">dp</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="mi">0</span><span class="o">][</span><span class="n">minDis</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="n">countA</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="n">countB</span><span class="o">]</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="n">c</span> <span class="o">&lt;</span> <span class="n">chairs</span><span class="o">;</span> <span class="n">c</span><span class="o">++)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">pa</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">pa</span> <span class="o">&lt;</span> <span class="n">minDis</span><span class="o">;</span> <span class="n">pa</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">pb</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">pb</span> <span class="o">&lt;</span> <span class="n">minDis</span><span class="o">;</span> <span class="n">pb</span><span class="o">++)</span> <span class="o">{</span>
                <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">a</span> <span class="o">&lt;=</span> <span class="n">countA</span><span class="o">;</span> <span class="n">a</span><span class="o">++)</span> <span class="o">{</span>
                    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">b</span> <span class="o">&lt;=</span> <span class="n">countB</span><span class="o">;</span> <span class="n">b</span><span class="o">++)</span> <span class="o">{</span>
                        <span class="kt">int</span> <span class="n">npa</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">minDis</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">pa</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
                        <span class="kt">int</span> <span class="n">npb</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">minDis</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">pb</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
                        <span class="c1">// Neither sit on the chair</span>
                        <span class="n">dp</span><span class="o">[</span><span class="n">c</span><span class="o">][</span><span class="n">npa</span><span class="o">][</span><span class="n">npb</span><span class="o">][</span><span class="n">a</span><span class="o">][</span><span class="n">b</span><span class="o">]</span> <span class="o">+=</span> <span class="n">dp</span><span class="o">[</span><span class="n">c</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="n">pa</span><span class="o">][</span><span class="n">pb</span><span class="o">][</span><span class="n">a</span><span class="o">][</span><span class="n">b</span><span class="o">];</span>

                        <span class="c1">// Arep can sit on the chair</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">pb</span> <span class="o">==</span> <span class="n">minDis</span><span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">a</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
                            <span class="n">dp</span><span class="o">[</span><span class="n">c</span><span class="o">][</span><span class="mi">0</span><span class="o">][</span><span class="n">minDis</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="n">a</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="n">b</span><span class="o">]</span> <span class="o">+=</span> <span class="n">dp</span><span class="o">[</span><span class="n">c</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="n">pa</span><span class="o">][</span><span class="n">pb</span><span class="o">][</span><span class="n">a</span><span class="o">][</span><span class="n">b</span><span class="o">]</span> <span class="o">*</span> <span class="n">a</span><span class="o">;</span>

                        <span class="c1">// Brep can sit on the chair</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">pa</span> <span class="o">==</span> <span class="n">minDis</span><span class="o">-</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="n">b</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">c</span> <span class="o">+</span> <span class="n">minDis</span> <span class="o">&lt;=</span> <span class="n">chairs</span> <span class="o">)</span>
                            <span class="n">dp</span><span class="o">[</span><span class="n">c</span><span class="o">][</span><span class="n">minDis</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="mi">0</span><span class="o">][</span><span class="n">a</span><span class="o">][</span><span class="n">b</span><span class="o">-</span><span class="mi">1</span><span class="o">]</span> <span class="o">+=</span> <span class="n">dp</span><span class="o">[</span><span class="n">c</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="n">pa</span><span class="o">][</span><span class="n">pb</span><span class="o">][</span><span class="n">a</span><span class="o">][</span><span class="n">b</span><span class="o">]</span> <span class="o">*</span> <span class="n">b</span><span class="o">;</span>
                    <span class="o">}</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kt">long</span> <span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">pa</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">pa</span> <span class="o">&lt;</span> <span class="n">minDis</span><span class="o">;</span> <span class="n">pa</span><span class="o">++)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">pb</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">pb</span> <span class="o">&lt;</span> <span class="n">minDis</span><span class="o">;</span> <span class="n">pb</span><span class="o">++)</span> <span class="o">{</span>
            <span class="n">ret</span> <span class="o">+=</span> <span class="n">dp</span><span class="o">[</span><span class="n">chairs</span><span class="o">-</span><span class="mi">1</span><span class="o">][</span><span class="n">pa</span><span class="o">][</span><span class="n">pb</span><span class="o">][</span><span class="mi">0</span><span class="o">][</span><span class="mi">0</span><span class="o">];</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">ret</span> <span class="o">*</span> <span class="n">chairs</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
<p>レーティングが高い人たちは，平気でDPを使用してきます.</p>
</div>
<div class="section" id="manhattandistance">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=5883&amp;rd=8069">ManhattanDistance</a></h2>
<p>1000点問題．
これも，DPでいける と思ったのですけど，500点問題で時間をほとんど使いきったため，さすがに時間が足りませんでした.
グラフをつくって，Dijkstra法でもいけます．1000点問題にしては，とっかかりやすいかと．</p>
</div>
<div class="section" id="id7">
<h2>結果</h2>
<p>System Testの結果です．
( <a class="reference external" href="http://www.topcoder.com/stat?c=coder_room_stats&amp;cr=15632820&amp;rd=8069&amp;rm=246773">Room Statistics</a> )</p>
<img alt="Room Statistics" src="http://static.flickr.com/37/74683080_2722d5598e_o.png" />
<p>ようやく，Division1ではじめてSystem Testに通りました．
Level2問題も解けたので，充実感．
レーティングは 1214 -&gt; 1429 と上昇しました．</p>
</div>

  </div>
</article>
<article>
  <header class="page-header">
    <h1 class="site-article-title">
      <a href="http://hayato.io/2005/2005javaone/"
         rel="bookmark"
         title="Permalink to JavaOne Tokyoで講演します">
         JavaOne Tokyoで講演します
      </a>
    </h1>
    <div class="post-date">
      <time datetime="2005-11-08">
        2005-11-08
      </time>
    </div>
  </header>
  <div class="article-content">
    <!-- -*- mode: rst; coding: utf-8 -*- -->
<p><a class="reference external" href="http://jp.sun.com/company/events/javaone/2005/">2005 JavaOne Tokyo</a> でGeronimoねたで講演します。</p>
<img alt="JavaOne" src="http://jp.sun.com/company/events/javaone/2005/images/top.gif" />

  </div>
</article>
<article>
  <header class="page-header">
    <h1 class="site-article-title">
      <a href="http://hayato.io/2005/srm270/"
         rel="bookmark"
         title="Permalink to SRM270 - Integer == Integer">
         SRM270 - Integer == Integer
      </a>
    </h1>
    <div class="post-date">
      <time datetime="2005-11-04">
        2005-11-04
      </time>
    </div>
  </header>
  <div class="article-content">
    <!-- -*- mode: rst; coding: utf-8 -*- -->
<!-- meta:
:edituri: http://www.blogger.com/feeds/15880554/posts/default/113405411346856373
:published: 2005-11-04T00:30:00+09:00

:replace_{RD}: 8067
:replace_{RM}: 246708
:replace_{PM1}: 4658
:replace_{PM2}: 4755
:replace_{PM3}: 4751 -->
<p><a class="reference external" href="http://www.topcoder.com/stat?c=round_overview&amp;rd=8067">SRM270</a> に挑戦．Division1に挑戦するのはこれが3回目ですが，前の2回は，</p>
<ul class="simple">
<li>Level1問題 - どちらもSubmitするも，単純なミスでSystem Testに落ちる.</li>
<li>Level2問題 - どちらも時間切れ．</li>
<li>Level3問題 - Openしたことさえありません．．</li>
</ul>
<p>とまだ1問もSystem Testに通ったことがありません．今度こそは1問は通るように．．</p>
<div class="section" id="countriesranklist-code">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=4658&amp;rd=8067">CountriesRanklist</a> (<a class="reference external" href="http://www.topcoder.com/stat?c=problem_solution&amp;rm=246708&amp;rd=8067&amp;pm=4658&amp;cr=15632820">code</a>)</h2>
<p>300点問題．
Codeは提出．今度こそ大丈夫と思っていたもの，またSystem Testで落ちてしまいました．
どこがおかしいんだろとCodeを見ていて，5分ほど．ようやく間違いを発見しました．ここです</p>
<div class="highlight"><pre><span class="k">if</span> <span class="o">(</span><span class="n">l</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">==</span> <span class="n">maxscore</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">))</span>
</pre></div>
<p>Integer と Integer を == で比較しています．．．あーやってしまった．
J2SE5からautoboxing/unboxing が使えるようになりましたが，すっかりそれに頼りきっていました．
このように左辺 と 右辺 ともに Integer の場合は，だめですね．．equals(..) じゃないと．
どちらかがintならよかったんだけど．また単純ミスだ．．</p>
</div>
<div class="section" id="salesmandilemma">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=4755&amp;rd=8067">SalesmanDilemma</a></h2>
<p>600点問題．
巡回セールスマン問題．．ではありません．
基本的には最短経路を求める問題に落ち着くのですが，
やっかいな点としてネガティブ・ループの考慮をする必要があります．
SRM中は，時間切れでSubmitできませんでした．もう少しだったんですけど．</p>
<p>SRM後に，完成させたコードです．
タイムオーバーになるかと思ったのですが，今回の条件ではこれでも十分2秒以内でした．</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SalesmansDilemma</span> <span class="o">{</span>

<span class="kt">int</span><span class="o">[][]</span> <span class="n">p</span><span class="o">;</span>
<span class="kt">int</span><span class="o">[]</span> <span class="n">visited</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">destination</span><span class="o">;</span>

<span class="kd">final</span> <span class="kt">int</span> <span class="n">NA</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">MIN_VALUE</span><span class="o">;</span>
<span class="kd">final</span> <span class="kt">int</span> <span class="n">ENDLESS</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">;</span>
<span class="kd">final</span> <span class="kt">int</span> <span class="n">IMPOSSIBLE</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">MIN_VALUE</span><span class="o">;</span>

<span class="kt">int</span> <span class="n">goal</span> <span class="o">=</span> <span class="n">IMPOSSIBLE</span><span class="o">;</span>

<span class="kd">public</span> <span class="n">String</span> <span class="nf">bestRoute</span><span class="o">(</span><span class="kt">int</span> <span class="n">towns</span><span class="o">,</span> <span class="kt">int</span> <span class="n">origin</span><span class="o">,</span> <span class="kt">int</span> <span class="n">destination</span><span class="o">,</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">travelCosts</span><span class="o">,</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">profits</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">destination</span> <span class="o">=</span> <span class="n">destination</span><span class="o">;</span>
    <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">towns</span><span class="o">][</span><span class="n">towns</span><span class="o">];</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">towns</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">fill</span><span class="o">(</span><span class="n">p</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">NA</span><span class="o">);</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">travelCosts</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="n">Scanner</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">travelCosts</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
        <span class="kt">int</span> <span class="n">from</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">to</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">cost</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="n">p</span><span class="o">[</span><span class="n">from</span><span class="o">][</span><span class="n">to</span><span class="o">]</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">p</span><span class="o">[</span><span class="n">from</span><span class="o">][</span><span class="n">to</span><span class="o">],</span> <span class="n">profits</span><span class="o">[</span><span class="n">to</span><span class="o">]</span> <span class="o">-</span> <span class="n">cost</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="n">visited</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">towns</span><span class="o">];</span>
    <span class="n">Arrays</span><span class="o">.</span><span class="na">fill</span><span class="o">(</span><span class="n">visited</span><span class="o">,</span> <span class="n">IMPOSSIBLE</span><span class="o">);</span>
    <span class="n">visited</span><span class="o">[</span><span class="n">origin</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="n">go</span><span class="o">(</span><span class="n">origin</span><span class="o">);</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">goal</span> <span class="o">==</span> <span class="n">IMPOSSIBLE</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;IMPOSSIBLE&quot;</span><span class="o">;</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">goal</span> <span class="o">==</span> <span class="n">ENDLESS</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;ENDLESS PROFIT&quot;</span><span class="o">;</span>
    <span class="k">return</span> <span class="s">&quot;BEST PROFIT: &quot;</span> <span class="o">+</span> <span class="o">(</span><span class="n">goal</span> <span class="o">+</span> <span class="n">profits</span><span class="o">[</span><span class="n">origin</span><span class="o">]);</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">go</span><span class="o">(</span><span class="kt">int</span> <span class="n">town</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">town</span> <span class="o">==</span> <span class="n">destination</span><span class="o">)</span> <span class="n">goal</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">max</span><span class="o">(</span><span class="n">goal</span><span class="o">,</span> <span class="n">visited</span><span class="o">[</span><span class="n">town</span><span class="o">]);</span>

    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">p</span><span class="o">[</span><span class="n">town</span><span class="o">].</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">p</span><span class="o">[</span><span class="n">town</span><span class="o">][</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="n">NA</span><span class="o">)</span> <span class="k">continue</span><span class="o">;</span>

        <span class="kt">int</span> <span class="n">old</span> <span class="o">=</span> <span class="n">visited</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
        <span class="kt">int</span> <span class="n">update</span> <span class="o">=</span> <span class="o">(</span><span class="n">visited</span><span class="o">[</span><span class="n">town</span><span class="o">]</span> <span class="o">==</span> <span class="n">ENDLESS</span><span class="o">)</span> <span class="o">?</span>
                     <span class="n">ENDLESS</span> <span class="o">:</span> <span class="n">visited</span><span class="o">[</span><span class="n">town</span><span class="o">]</span> <span class="o">+</span> <span class="n">p</span><span class="o">[</span><span class="n">town</span><span class="o">][</span><span class="n">i</span><span class="o">];</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">old</span> <span class="o">==</span> <span class="n">IMPOSSIBLE</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">visited</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">update</span><span class="o">;</span>
            <span class="n">go</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="n">visited</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">old</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">update</span> <span class="o">&gt;</span> <span class="n">old</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">visited</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">ENDLESS</span><span class="o">;</span>
            <span class="n">go</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="n">visited</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">old</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
<p>この手の問題では，Bellman-Ford アルゴリズムを用いるのが定石のようです．
ある地点からある地点までの，最短経路，およびネガティブ・ループを発見するアルゴリズムです．
練習がてら，Javaで実装してみました．</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">java.util.Scanner</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SalesmansDilemma</span> <span class="o">{</span>

<span class="kd">class</span> <span class="nc">Edge</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">source</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">destination</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">weight</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="n">String</span> <span class="nf">bestRoute</span><span class="o">(</span><span class="kt">int</span> <span class="n">towns</span><span class="o">,</span> <span class="kt">int</span> <span class="n">origin</span><span class="o">,</span> <span class="kt">int</span> <span class="n">destination</span><span class="o">,</span>
        <span class="n">String</span><span class="o">[]</span> <span class="n">travelCosts</span><span class="o">,</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">profits</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Edge</span><span class="o">[]</span> <span class="n">edges</span>  <span class="o">=</span> <span class="k">new</span> <span class="n">Edge</span><span class="o">[</span><span class="n">travelCosts</span><span class="o">.</span><span class="na">length</span><span class="o">];</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">travelCosts</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="n">Scanner</span> <span class="n">scan</span>  <span class="o">=</span> <span class="k">new</span> <span class="n">Scanner</span><span class="o">(</span><span class="n">travelCosts</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
        <span class="n">edges</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Edge</span><span class="o">();</span>
        <span class="n">edges</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">source</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="n">edges</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">destination</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="na">nextInt</span><span class="o">();</span>
        <span class="n">edges</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">weight</span> <span class="o">=</span> <span class="n">scan</span><span class="o">.</span><span class="na">nextInt</span><span class="o">()</span>
                         <span class="o">-</span> <span class="n">profits</span><span class="o">[</span><span class="n">edges</span><span class="o">[</span><span class="n">i</span><span class="o">].</span><span class="na">destination</span><span class="o">];</span>
    <span class="o">}</span>
    <span class="kt">long</span><span class="o">[]</span> <span class="n">verticles</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">long</span><span class="o">[</span><span class="n">towns</span><span class="o">];</span>
    <span class="kt">long</span> <span class="n">INFINITY</span> <span class="o">=</span> <span class="n">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">verticles</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="n">verticles</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">INFINITY</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="n">verticles</span><span class="o">[</span><span class="n">origin</span><span class="o">]</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="kt">boolean</span><span class="o">[]</span> <span class="n">negative</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="n">towns</span><span class="o">];</span>

    <span class="c1">// relax and find negative cycle</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">verticles</span><span class="o">.</span><span class="na">length</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">Edge</span> <span class="n">e</span> <span class="o">:</span> <span class="n">edges</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">u</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">source</span><span class="o">;</span>
            <span class="kt">int</span> <span class="n">v</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="na">destination</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">verticles</span><span class="o">[</span><span class="n">u</span><span class="o">]</span> <span class="o">==</span> <span class="n">INFINITY</span><span class="o">)</span> <span class="k">continue</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">verticles</span><span class="o">[</span><span class="n">v</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">verticles</span><span class="o">[</span><span class="n">u</span><span class="o">]</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">weight</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">verticles</span><span class="o">[</span><span class="n">v</span><span class="o">]</span> <span class="o">=</span> <span class="n">verticles</span><span class="o">[</span><span class="n">u</span><span class="o">]</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">weight</span><span class="o">;</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">verticles</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">negative</span><span class="o">[</span><span class="n">v</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">verticles</span><span class="o">[</span><span class="n">destination</span><span class="o">]</span> <span class="o">==</span> <span class="n">INFINITY</span><span class="o">)</span> <span class="k">return</span> <span class="s">&quot;IMPOSSIBLE&quot;</span><span class="o">;</span>

    <span class="kt">boolean</span><span class="o">[]</span> <span class="n">mark</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="n">towns</span><span class="o">];</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">towns</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">negative</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">mark</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="o">{</span>
            <span class="n">go</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">mark</span><span class="o">,</span> <span class="n">edges</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">mark</span><span class="o">[</span><span class="n">destination</span><span class="o">])</span> <span class="k">return</span> <span class="s">&quot;ENDLESS PROFIT&quot;</span><span class="o">;</span>

    <span class="k">return</span> <span class="s">&quot;BEST PROFIT: &quot;</span> <span class="o">+</span>
           <span class="o">-(</span><span class="n">verticles</span><span class="o">[</span><span class="n">destination</span><span class="o">]</span> <span class="o">-</span> <span class="n">profits</span><span class="o">[</span><span class="n">origin</span><span class="o">]);</span>
<span class="o">}</span>

<span class="kt">void</span> <span class="nf">go</span><span class="o">(</span><span class="kt">int</span> <span class="n">v</span><span class="o">,</span> <span class="kt">boolean</span><span class="o">[]</span> <span class="n">mark</span><span class="o">,</span> <span class="n">Edge</span><span class="o">[]</span> <span class="n">edges</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">mark</span><span class="o">[</span><span class="n">v</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="n">Edge</span> <span class="n">e</span> <span class="o">:</span> <span class="n">edges</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">v</span> <span class="o">==</span> <span class="n">e</span><span class="o">.</span><span class="na">source</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">mark</span><span class="o">[</span><span class="n">e</span><span class="o">.</span><span class="na">destination</span><span class="o">])</span> <span class="o">{</span>
            <span class="n">go</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">destination</span><span class="o">,</span> <span class="n">mark</span><span class="o">,</span> <span class="n">edges</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="section" id="packingshapes">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=4751&amp;rd=8067">PackingShapes</a></h2>
<p>900点問題．
SRM中はOpenしませんでした．
ある長方形のなかに，別の長方形をはみださないようにいれることができるか判定する問題です．
たとえば，幅100 x 高さ100 の長方形には，幅140 x 高さ1 の長方形は（傾ければ）いれることができます．
幅140 x 50 の長方形はどんなにがんばってもはいりません．</p>
</div>
<div class="section" id="id6">
<h2>結果</h2>
<p>System Testの結果です．
( <a class="reference external" href="http://www.topcoder.com/stat?c=coder_room_stats&amp;cr=15632820&amp;rd=8067&amp;rm=246708">Room Statistics</a> )</p>
<img alt="Room Statistics" src="http://static.flickr.com/37/74682670_24668897a1_o.png" />
<p>レーティングは 1303 -&gt; 1214 と低下．かろうじてDivision1には残っています.</p>
</div>
<div class="section" id="id8">
<h2>今日の教訓</h2>
<ul class="simple">
<li>Primitive と ラッパー．．Javaを使い続ける限りつきまとう，もっとも頭のいたい問題です．
autoboxing/unboxing には惑わされないように．</li>
</ul>
</div>

  </div>
</article>
<article>
  <header class="page-header">
    <h1 class="site-article-title">
      <a href="http://hayato.io/2005/srm268/"
         rel="bookmark"
         title="Permalink to SRM268 - Division2脱出">
         SRM268 - Division2脱出
      </a>
    </h1>
    <div class="post-date">
      <time datetime="2005-10-19">
        2005-10-19
      </time>
    </div>
  </header>
  <div class="article-content">
    <!-- -*- mode: rst; coding: utf-8 -*- -->
<p><a class="reference external" href="http://www.topcoder.com/stat?c=round_overview&amp;rd=8001">SRM268</a> に挑戦．Division2の問題です．</p>
<div class="section" id="crosswordpuzzle-code">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=5867&amp;rd=8001">CrossWordPuzzle</a> (<a class="reference external" href="http://www.topcoder.com/stat?c=problem_solution&amp;rm=246654&amp;rd=8001&amp;pm=5867&amp;cr=15632820">code</a>)</h2>
<p>250点問題．
1文字・1文字，順にチェックしている人が多かったようですが，
正規表現を使用した文字列分割 (いわゆる split(..)) が利用できる言語なら，それを使えば簡単です．
今回は正規表現を使用するほどでもないですが，正規表現を使用すれば，ずっと簡単になる問題もTopCoderではときどき出題されるようです．</p>
</div>
<div class="section" id="cmpdwords-code">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=3490&amp;rd=8001">CmpdWords</a> (<a class="reference external" href="http://www.topcoder.com/stat?c=problem_solution&amp;rm=246654&amp;rd=8001&amp;pm=3490&amp;cr=15632820">code</a>)</h2>
<p>500点問題．
一見，問題がわかりにくいですが，ハッシュテーブルを使用して，合成文字列の重複のカウントをすれば，これも簡単です．</p>
</div>
<div class="section" id="triarea">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=4699&amp;rd=8001">TriArea</a></h2>
<p>1000点問題．
重なり合う2等辺三角形が複数与えられます．それらがカバーする面積をもとめる問題です.
3角形の重なりを判定して全体の面積を求めようととしたのですが，
1時間以上，格闘したあげく，時間切れでした．</p>
<p>パラメータの条件として</p>
<blockquote>
Each element of xCenter and yCenter will be between -100 and 100, inclusive.</blockquote>
<p>とあるので，全2次元空間をひたすら調べたほうが簡単でした.
1 x 1 のグリッドをさらに4つのエリアにわけて，そのエリアが三角形に含まれているなら</p>
<blockquote>
(面積) += 0.25</blockquote>
<p>とすればよいです．</p>
<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TriArea</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">area</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">xCenter</span><span class="o">,</span>
                     <span class="kt">int</span><span class="o">[]</span> <span class="n">yCenter</span><span class="o">,</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">height</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="n">res</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">N</span> <span class="o">=</span> <span class="n">xCenter</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">dx</span> <span class="o">=</span> <span class="o">{</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">};</span>
    <span class="kt">int</span><span class="o">[]</span> <span class="n">dy</span> <span class="o">=</span> <span class="o">{</span><span class="mi">2</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">};</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">200</span><span class="o">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">200</span><span class="o">;</span> <span class="n">x</span><span class="o">++)</span> <span class="o">{</span>
      <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">100</span><span class="o">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">200</span><span class="o">;</span> <span class="n">y</span><span class="o">++)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="o">;</span> <span class="n">d</span><span class="o">++)</span> <span class="o">{</span>
          <span class="kt">double</span> <span class="n">nx</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">dx</span><span class="o">[</span><span class="n">d</span><span class="o">]</span> <span class="o">/</span> <span class="mf">4.0</span><span class="o">;</span>
          <span class="kt">double</span> <span class="n">ny</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">dy</span><span class="o">[</span><span class="n">d</span><span class="o">]</span> <span class="o">/</span> <span class="mf">4.0</span><span class="o">;</span>
          <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">ny</span> <span class="o">&lt;</span> <span class="n">yCenter</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="k">continue</span><span class="o">;</span>
            <span class="k">if</span> <span class="o">(</span> <span class="n">height</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">&gt;</span> <span class="n">Math</span><span class="o">.</span><span class="na">abs</span><span class="o">(</span><span class="n">xCenter</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">-</span> <span class="n">nx</span><span class="o">)</span>
                  <span class="o">+</span> <span class="o">(</span><span class="n">ny</span> <span class="o">-</span> <span class="n">yCenter</span><span class="o">[</span><span class="n">i</span><span class="o">]))</span> <span class="o">{</span>
              <span class="n">res</span> <span class="o">+=</span> <span class="mf">0.25</span><span class="o">;</span>
              <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
          <span class="o">}</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">res</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
<p>これでも，Order は 400 x 400 x 4 x 25(3角形の最大数) ですから，これで十分いけましたね．．</p>
</div>
<div class="section" id="id7">
<h2>結果</h2>
<p>System Testの結果です．
( <a class="reference external" href="http://www.topcoder.com/stat?c=coder_room_stats&amp;cr=15632820&amp;rd=8001&amp;rm=246654">Room Statistics</a> )</p>
<img alt="Room Statistics" src="http://static.flickr.com/43/74682258_bc8a562129_o.png" />
<p>1000点問題ができなかったのが悔やまれますが,250点問題と500点問題は早めにSubmitできたためか，
ルーム内ではTopのポイントでした．
レーティングは 1152 -&gt; 1303 と 1200を超えたので，Division2脱出です．</p>
</div>
<div class="section" id="id9">
<h2>今日の教訓</h2>
<ul class="simple">
<li>入力条件をよくチェックする．入力条件によっては，エレガントに解く必要はない．
全部調べても大丈夫な場合がある．特にDivision2は．</li>
</ul>
</div>

  </div>
</article>
<article>
  <header class="page-header">
    <h1 class="site-article-title">
      <a href="http://hayato.io/2005/srm266/"
         rel="bookmark"
         title="Permalink to SRM266 - NASA, we have a problem...">
         SRM266 - NASA, we have a problem...
      </a>
    </h1>
    <div class="post-date">
      <time datetime="2005-10-02">
        2005-10-02
      </time>
    </div>
  </header>
  <div class="article-content">
    <!-- -*- mode: rst; coding: utf-8 -*- -->
<p><a class="reference external" href="http://www.topcoder.com/stat?c=round_overview&amp;rd=7999">SRM266</a> に挑戦．
Division2落ちしたので，今日からはDivision2．
一発でDivision1に復帰するのが目標．
前回，TopCoderに初挑戦したときは，Division2の問題は3問ともSubmitできたので（1問は間違っていたけど．．），今回もなんとかなるか，と甘い気持ちでスタート．</p>
<div class="section" id="swimmersdelight-code">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=4821&amp;rd=7999">SwimmersDelight</a> (<a class="reference external" href="http://www.topcoder.com/stat?c=problem_solution&amp;rm=203780&amp;rd=7999&amp;pm=4821&amp;cr=15632820">code</a>)</h2>
<p>250点問題．
幅が10フィートの川があります．間には足場となる2つの石があります．
最適な飛び方をした場合,もっとも長いジャンプはどれだけの長さですむか？という問題です．
石の座標(x, y) (xが川の幅方向: 0&lt;=x&lt;=10) が(3, 5), (6, 2)だとすると，</p>
<blockquote>
スタート (0, 5) --(距離3)--&gt; (3, 5) --(距離4.24..)--&gt; (6, 2) --(距離4)--&gt; (10, 2) 到着</blockquote>
<p>といけば，最大のジャンプは 4.24.. ですみます.
全部のパスを調べればよいだけの問題ですので，さくっと終わらせて（といっても13分かかってますけど）．</p>
</div>
<div class="section" id="exploringeuropa">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=4809&amp;rd=7999">ExploringEuropa</a></h2>
<p>550点問題．
木星の月・Europa上の地表探査機に対して，NASAから指示（「REVERSE」「STOP」）を出して，
ちょうど 探査対象 の上に探査機を停めたい．
いつ指示をだすのがBestか？という問題です.
NASAと探査機の間は，すぐに指示が伝わらなくDelayが生じる．のが問題の肝です．
問題文が長いのはいいとして，問題を呼んだ直後はそんなに難しいとは思わなかったのですけど，，
はまりました．．．
1時間以上格闘したあげく，結局時間切れでした．</p>
</div>
<div class="section" id="zcurve">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=4808&amp;rd=7999">ZCurve</a></h2>
<p>900点問題．
SRM中はOpenしませんでしたが，こちらのほうが簡単でした．
ExploringEuropa はとっとと捨てて，こちらににとりかかればよかった．</p>
</div>
<div class="section" id="id6">
<h2>結果</h2>
<p>System Testの結果です．
( <a class="reference external" href="http://www.topcoder.com/stat?c=coder_room_stats&amp;cr=15632820&amp;rd=7999&amp;rm=203780">Room Statistics</a> )</p>
<img alt="Room Statistics" src="http://static.flickr.com/41/74681944_23c573b1ab_o.png" />
<p>ExploringEuropa と ZCurve は Division1のLevel1(300点)問題, Level2(450点)問題にも使用されていました．
どちらのDivisionの結果をみても，ExploringEuropaの方が，あきらかに正解率が悪かったです．
なかなか状況把握やとっかかりがつかみにくいようで，みなさん苦労したようです．
難易度とポイントのバランスを考えると，「問題をいれかえるべきだったのでは?」という声が多かったです.
その気になれば，手作業・手計算でも正解を導き出せる問題なんですけどね．
レーティングはさすがに下がると思っていたけれど，ちょっとだけ上昇でした．</p>
</div>
<div class="section" id="id8">
<h2>今日の教訓</h2>
<ul class="simple">
<li>はまったときはその問題を捨てて次の問題へ．必ずしも順番に解いていく必要はなし．</li>
</ul>
<p>Division2脱出はならず．．次回もDivision2です．．</p>
</div>

  </div>
</article>
<article>
  <header class="page-header">
    <h1 class="site-article-title">
      <a href="http://hayato.io/2005/srm265/"
         rel="bookmark"
         title="Permalink to SRM265 - Division2落ち...">
         SRM265 - Division2落ち...
      </a>
    </h1>
    <div class="post-date">
      <time datetime="2005-09-28">
        2005-09-28
      </time>
    </div>
  </header>
  <div class="article-content">
    <!-- -*- mode: rst; coding: utf-8 -*- -->
<p><a class="reference external" href="http://www.topcoder.com/stat?c=round_overview&amp;rd=8007">SRM265E</a> に挑戦．
前回急降下したレーティングは1255です．まだ1200以上なのでかろうじてDivision1には残っています．
前回はポイント ゼロだったので，今回こそは一問でいいからSystem Testに通ることを目標に．今回もゼロだとおそらく1200以下に落ちます．</p>
<div class="section" id="schedulestrength-code">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=1993&amp;rd=8007">ScheduleStrength</a> (<a class="reference external" href="http://www.topcoder.com/stat?c=problem_solution&amp;rm=203701&amp;rd=8007&amp;pm=1993&amp;cr=15632820">code</a>)</h2>
<p>250点問題．
リーグ戦において</p>
<ul class="simple">
<li>ある2チームの勝率が同じだった</li>
<li>どちらか1チームをプレーオフに進出させなければいけない</li>
</ul>
<p>このような状況のとき，より厳しいスケジュール・強い対戦相手と戦ってきたチームを優先させましょう．
このスケジュールの厳しさを計算せよという問題です．
これもやはりただ実装するだけという問題なのですが，最初，意味を勘違いしていたこともあり，
大幅に時間がとられてしまいました．
しかし，44分は時間かけすぎ．</p>
</div>
<div class="section" id="recipe">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=4708&amp;rd=8007">Recipe</a></h2>
<p>500点問題．
料理の正しいレシピ (例 - 塩:大さじ4，砂糖:小さじ18, 醤油: カップ2杯) と，
実際にボールに入れて混ぜてしまった量(例 - 塩:大さじ4，砂糖:小さじ19, 醤油: カップ3杯)が与えられます．
この時，正しいレシピの割合にするには，ボールにあとどれだけ各調味料をいれればよいでしょうか？という問題です．
必要以上にいれてはいけません．
この例の場合は，あと (塩:大さじ4，砂糖:小さじ17, 醤油: カップ1杯) 追加はいれすぎです．
正解は(塩:大さじ2，砂糖:小さじ8, 醤油: カップ0杯) になります．</p>
<p>うーん，時間切れでした．
最大公約数を使用すれば，エレガントにとけますが，それ以外の方法では制限時間の2秒以内には終わらない可能性があります．
実際，SRM後にコードを完成させたのですが，最悪の入力ケースでは2秒以内に終了しませんでした．</p>
</div>
<div class="section" id="pokerdeck">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=1981&amp;rd=8007">PokerDeck</a></h2>
<p>1000点問題．SRM中はOpenできませんでした．
この問題に正解したのは，Division1参加者333人中1人だけです．． ( <a class="reference external" href="http://www.topcoder.com/tc?module=ProblemDetail&amp;rd=8007&amp;pm=1981">Problem Detail</a> )</p>
</div>
<div class="section" id="id7">
<h2>結果</h2>
<p>今度こそ，250点問題はPassすると思ったのけど..．System Testの結果です．
( <a class="reference external" href="http://www.topcoder.com/stat?c=coder_room_stats&amp;cr=15632820&amp;rd=8007&amp;rm=203701">Room Statistics</a> )</p>
<img alt="Room Statistics" src="http://static.flickr.com/6/74681550_405b300ecd_o.png" />
<p>あれー．またSystem Testに落ちてる．ここでした．．</p>
<div class="highlight"><pre><span class="n">t</span><span class="o">.</span><span class="na">p</span> <span class="o">=</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span> <span class="n">w</span> <span class="o">/</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span> <span class="n">l</span><span class="o">;</span>
</pre></div>
<p>勝率の計算を win / (win + lose) でなく，win / lose で行っています．
またもや，あきれるくらいの単純なミス．これでExampleにすべて通ってしまったのが，運が悪かった．．
今回も，Challenge Timeでは誰もここにきずかなかったのか，誰もチャレンジしてきませんでした．</p>
<p>他の人のソースを見てみると，あらかじめ，勝率を</p>
<div class="highlight"><pre><span class="o">(</span><span class="kt">double</span><span class="o">)</span><span class="n">w</span> <span class="o">/</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span> <span class="n">total</span>
</pre></div>
<p>と （勝数) / (試合数) を計算しておいて，doubleになった勝率どおしを比較するのではなく，</p>
<div class="highlight"><pre><span class="n">my</span><span class="o">.</span><span class="na">win</span> <span class="o">*</span> <span class="n">your</span><span class="o">.</span><span class="na">total</span> <span class="o">-</span> <span class="n">your</span><span class="o">.</span><span class="na">win</span> <span class="o">*</span> <span class="n">my</span><span class="o">.</span><span class="na">total</span>
</pre></div>
<p>として，比較しているのが見受けられます．
全て整数どおしの計算になるので，doubleにまつわる問題を避けることができます．なるほど．</p>
</div>
<div class="section" id="id9">
<h2>今日の教訓</h2>
<ul class="simple">
<li>Example Caseにとおったからといって，正解とはかぎらない．</li>
<li>おちつけ</li>
<li>doubleどおしの比較は避けれるものなら避ける．
整数ですべて片付くならそちらを採用.
(a / b) と (c / d) を比較するには a/b - c/d ではなく，a * d - c * b のほうがよい．</li>
</ul>
<p>レートは 1255 -&gt; 1097 とやはり急降下．Division2行きが決定しました．．．名前も緑に．
2軍におちる選手の心境がすこしはわかったような．</p>
</div>

  </div>
</article>
<article>
  <header class="page-header">
    <h1 class="site-article-title">
      <a href="http://hayato.io/2005/srm262/"
         rel="bookmark"
         title="Permalink to SRM262 - 初Division1はTypoに終わる">
         SRM262 - 初Division1はTypoに終わる
      </a>
    </h1>
    <div class="post-date">
      <time datetime="2005-09-10">
        2005-09-10
      </time>
    </div>
  </header>
  <div class="article-content">
    <!-- -*- mode: rst; coding: utf-8 -*- -->
<p><a class="reference external" href="http://www.topcoder.com/stat?c=round_overview&amp;rd=7996">SRM262</a> に挑戦．
レートが1200以上の人はDivision1なので，今日からはDivision1．
75分で3問という点はDivision2と同じだが，問題の内容はDivision2と比べてかなーり難しい（はず）．</p>
<div class="section" id="sortbooks-code">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=4557&amp;rd=7996">SortBooks</a> (<a class="reference external" href="http://www.topcoder.com/stat?c=problem_solution&amp;rm=203562&amp;rd=7996&amp;pm=4557&amp;cr=15632820">code</a>)</h2>
<p>250点問題．
本のタイトルの条件をみたすものをピックアップする問題．
アルゴリズム的には悩むところはなくただ実装するだけ．
コーディングそのものは10分ほどで終わりましたが，作成したものにExampleと同じ入力を与えても，
正解例と異なる値が出力され，なかなかSubmitできません．
Exampleというのは，入力の例とその入力に対する正しい出力例のことです．
各問題には数個のExampleがついてきます．
最低限，Exampleで動作確認してから，Submitすべきです．</p>
<p>そのExample Caseに通りません．．．
おかしいとおもいつつ，あせりまくり，デバッグをはじめたが，なにがおかしいかさっぱり．
とりあえずこれ以上250点問題に時間をかけるわけにはいかないので30分過ぎたところでSubmitしました．</p>
</div>
<div class="section" id="bestyahtzeescore">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=4797&amp;rd=7996">BestYahtzeeScore</a></h2>
<p>500点問題．
5個のダイスを3回まで振ることができた場合（2回目以降は，振らずに残しておいてもいいです），
5個の目の組み合わせで決まるスコアの最大値を返す問題．
ダイスをふると何がでるかは，あらかじめ長さが15の文字列で与えられます．
...時間切れでした．最終的に可能な5個の目の組み合わせをすべて試せばいいのですが，そこで手間取りました．</p>
</div>
<div class="section" id="magicboxes">
<h2><a class="reference external" href="http://www.topcoder.com/stat?c=problem_statement&amp;pm=932&amp;rd=7996">MagicBoxes</a></h2>
<p>1000点問題．
コンテスト中はOpenできませんでした．</p>
</div>
<div class="section" id="id6">
<h2>結果</h2>
<p>System Testの結果です．
( <a class="reference external" href="http://www.topcoder.com/stat?c=coder_room_stats&amp;cr=15632820&amp;rd=7996&amp;rm=203562">Room Statistics</a> )</p>
<img alt="Room Statistics" src="http://static.flickr.com/9/74681248_1f161f46ab_o.png" />
<p>やはり，250点問題はSystem Testに落ちました．結果，Scoreはゼロです．．．
あー，Typoでした．．ここです</p>
<div class="highlight"><pre><span class="k">if</span> <span class="o">(</span><span class="n">w</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">&quot;the&quot;</span><span class="o">)</span> <span class="o">||</span> <span class="n">w</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">&quot;and&quot;</span><span class="o">)</span>
        <span class="o">||</span> <span class="n">w</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">&quot;or&quot;</span><span class="o">))</span> <span class="o">{</span>
    <span class="k">return</span> <span class="mi">1</span><span class="o">;</span>
</pre></div>
<p>&quot;of&quot; とするべきところを，&quot;or&quot; としています．．本番中はまったく気づきませんでした．
ちなみにこの問題，はやい人は3分もかからずにSubmitしています ( <a class="reference external" href="http://www.topcoder.com/tc?module=ProblemDetail&amp;rd=7996&amp;pm=4557">Problem Details</a> )</p>
<p>こうしてみると，Division2ではJavaとC++使用者は同数ほどなのに，Division1 では C++使いが多いですね．</p>
</div>
<div class="section" id="id9">
<h2>今日の教訓</h2>
<ul class="simple">
<li>文字列リテラルは 問題文からコピーandペーストすべき．</li>
<li>Example Case はすべて通してからSubmit．やけになって途中でSubmitしても無意味です．
必ずどこかが間違っていますし，他の参加者にChallengeの機会を増やすことにもなります．</li>
</ul>
<p>そういえば，今回はChallenge Time では，自分の250点問題には誰もChallengeしてきませんでした．
あまりに単純なミスすぎて逆に発見できなかったのか...
レートは 1579 -&gt; 1255 と大幅に減りました．かろうじてDivision1には残っています．</p>
</div>

  </div>
</article>            </ol><!-- /#posts-list -->
<ul class="pager">
        <li class="previous"><a href="http://hayato.io/page/6/" rel="prev">&larr; Newer Posts</a></li>
        <li class="next"><a href="http://hayato.io/page/8/" rel="next">Older Posts &rarr;</a></li>
</ul>
            </section><!-- /#content -->
</section>
<div class="autopagerize_insert_before"></div>
          <hr/>
          <footer class="base-footer text-center">
            <small>
              Contents licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.
            </small>
          </footer>
        </div>
      </div>
    </div>
    <script src="//code.jquery.com/jquery.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script src="http://hayato.io/theme/site.js"></script>
  </body>
</html>