.. -*- mode: rst; coding: utf-8 -*-

====================================
SRM265 - Division2落ち...
====================================

:slug: srm265
:date: 2005-09-28

.. meta::
  :edituri: http://www.blogger.com/feeds/15880554/posts/default/113361367828536009
  :published: 2005-09-28T00:30:00+09:00

  :replace_{RD}: 8007
  :replace_{RM}: 203701
  :replace_{PM1}: 1993
  :replace_{PM2}: 4708
  :replace_{PM3}: 1981


SRM265E__ に挑戦．
前回急降下したレーティングは1255です．まだ1200以上なのでかろうじてDivision1には残っています．
前回はポイント ゼロだったので，今回こそは一問でいいからSystem Testに通ることを目標に．今回もゼロだとおそらく1200以下に落ちます．

__ http://www.topcoder.com/stat?c=round_overview&rd=8007


ScheduleStrength__ (code__)
=============================

__ http://www.topcoder.com/stat?c=problem_statement&pm=1993&rd=8007
__ http://www.topcoder.com/stat?c=problem_solution&rm=203701&rd=8007&pm=1993&cr=15632820

250点問題．
リーグ戦において

* ある2チームの勝率が同じだった
* どちらか1チームをプレーオフに進出させなければいけない

このような状況のとき，より厳しいスケジュール・強い対戦相手と戦ってきたチームを優先させましょう．
このスケジュールの厳しさを計算せよという問題です．
これもやはりただ実装するだけという問題なのですが，最初，意味を勘違いしていたこともあり，
大幅に時間がとられてしまいました．
しかし，44分は時間かけすぎ．

Recipe__
========

__ http://www.topcoder.com/stat?c=problem_statement&pm=4708&rd=8007

500点問題．
料理の正しいレシピ (例 - 塩:大さじ4，砂糖:小さじ18, 醤油: カップ2杯) と，
実際にボールに入れて混ぜてしまった量(例 - 塩:大さじ4，砂糖:小さじ19, 醤油: カップ3杯)が与えられます．
この時，正しいレシピの割合にするには，ボールにあとどれだけ各調味料をいれればよいでしょうか？という問題です．
必要以上にいれてはいけません．
この例の場合は，あと (塩:大さじ4，砂糖:小さじ17, 醤油: カップ1杯) 追加はいれすぎです． 
正解は(塩:大さじ2，砂糖:小さじ8, 醤油: カップ0杯) になります．

うーん，時間切れでした．
最大公約数を使用すれば，エレガントにとけますが，それ以外の方法では制限時間の2秒以内には終わらない可能性があります．
実際，SRM後にコードを完成させたのですが，最悪の入力ケースでは2秒以内に終了しませんでした．

PokerDeck__
===========

__ http://www.topcoder.com/stat?c=problem_statement&pm=1981&rd=8007

1000点問題．SRM中はOpenできませんでした．
この問題に正解したのは，Division1参加者333人中1人だけです．． ( `Problem Detail`__ )

__ http://www.topcoder.com/tc?module=ProblemDetail&rd=8007&pm=1981

結果
====

今度こそ，250点問題はPassすると思ったのけど..．System Testの結果です．
( `Room Statistics`__ )

__ http://www.topcoder.com/stat?c=coder_room_stats&cr=15632820&rd=8007&rm=203701

.. image:: http://static.flickr.com/6/74681550_405b300ecd_o.png
   :alt: Room Statistics

あれー．またSystem Testに落ちてる．ここでした．． 

.. code-block:: java

    t.p = (double) w / (double) l;

勝率の計算を win / (win + lose) でなく，win / lose で行っています．
またもや，あきれるくらいの単純なミス．これでExampleにすべて通ってしまったのが，運が悪かった．．
今回も，Challenge Timeでは誰もここにきずかなかったのか，誰もチャレンジしてきませんでした．

他の人のソースを見てみると，あらかじめ，勝率を 

.. code-block:: java

    (double)w / (double) total

と （勝数) / (試合数) を計算しておいて，doubleになった勝率どおしを比較するのではなく， 

.. code-block:: java

    my.win * your.total - your.win * my.total

として，比較しているのが見受けられます．
全て整数どおしの計算になるので，doubleにまつわる問題を避けることができます．なるほど．

今日の教訓
==========

* Example Caseにとおったからといって，正解とはかぎらない．
* おちつけ
* doubleどおしの比較は避けれるものなら避ける．
  整数ですべて片付くならそちらを採用.
  (a / b) と (c / d) を比較するには a/b - c/d ではなく，a * d - c * b のほうがよい．

レートは 1255 -> 1097 とやはり急降下．Division2行きが決定しました．．．名前も緑に．
2軍におちる選手の心境がすこしはわかったような．
